<div class="my-page">
	<div class="container">
		<%# プロフィール %>
		<div class="my-profile">
			<p><%= @user.nickname%>さんの投稿一覧</p>
			<% if @user.image.attached? %>
				<%= image_tag @user.image.variant(resize: '160x160'), class: 'user-image'  %>
			<% else %>
				<i class="fas fa-user-circle user-image fa-8x"></i>
			<% end %>
			<div>
				<%= link_to "アカウントの編集", edit_user_path(current_user), class: "user-edit" %>
			</div>
		</div>

		<%# カレンダー表示 %>
		<div class="calender">
			<%= month_calendar events: @targets do |date, targets| %>
				<%= date.day %>
				<%# 投稿した日は●印がつく %>
				<% targets.each do |target| %>
					<div class="post-sign">
						<%= "⚫︎" if target.present? %>
					</div>
				<% end %>
			<% end %>
		</div>
	</div>

	<%# ユーザーの投稿一覧 %>
	<ul class='targets-list'>
		<% @targets.each do |target|%>
			<li>
				<%= link_to target_path(target), class: 'target-link' do %>
					<div class="target-box">

						<div class="user-info">
							<div class="user-image">
								<% if @user.image.attached? %>
									<%= image_tag @user.image.variant(resize: '50x50'), class: 'user-img' %>
								<% else %>
										<i class="fas fa-user-circle fa-3x"></i>
								<% end %>
							</div>
							
							<div class="user-name">
								<%= target.user.nickname %>
							</div>
						</div>
						
						<div class="target-content">
							<%= target.content %>
						</div>

						<div class="target-date">
							<%= target.created_at.strftime("%H:%M  %Y/%m/%d") %>
						</div>
						
					</div>
				<% end %>
			</li>
		<% end %>
	</ul>

</div>